---
title: 死磕设计模式-工厂模式
top: false
cover: false
date: 2019-12-11 23:43:14
password:
summary:
tags:
 - 设计模式
categories: 后端
---

根据抽象程度不同，PHP工厂模式分为：*简单工厂模式、工厂方法模式和抽象工厂模式*
## 简单工厂模式

### 定义：
　　定义一个工厂类，根据传入的参数不同返回不同的实例，被创建的实例具有共同的父类或接口。工厂模式中，创建的对象不能太多，人们并不关心对象的创建；其次封装了对象的创建过程。

### 适用场景：
　　（1）需要创建的对象较少。
　　（2）客户端不关心对象的创建过程。

### 示例：
创建一个可以绘制不同形状的绘图工具，可以绘制圆形，正方形，三角形，每个图形都会有一个draw()方法用于绘图
```
//接口这里方法函数修饰符为public
interface Shape
{
    public function draw();
}

//圆形
class CircleShape implements Shape
{
    public function draw()
    {
        echo '我是圆形draw方法';
    }
}

//正方形
class SquareShape implements Shape
{
    public function draw()
    {
        echo '我是正方形draw方法';
    }
}

//工厂模式的具体实现
class FactoryShape
{
    public $tag = "FactoryShape";

    static public function getShape($shape)
    {
        switch ($shape) {
            case 'circle':
                return new CircleShape();
                break;
            case 'square':
                return new SquareShape();
                break;
        }
    }
}

FactoryShape::getShape('circle')->draw();
```

## 抽象工厂模式
抽象工厂模式是工厂方法的进一步深化，在这个模式中的工厂类不单单可以创建一个对象，而是可以创建一组对象。这是和工厂方法最大的不同点。

### 定义
　　提供一个创建一系列相关或相互依赖对象的接口，而无须指定它们具体的类。(在抽象工厂模式中，每一个具体工厂都提供了多个工厂方法用于产生多种不同类型的对象)

### 实例：
　　现在需要做一款跨平台的游戏，需要兼容Android，Ios 两个移动操作系统，该游戏针对每个系统都设计了一套操作控制器（OperationController）和界面控制器（UIController），下面通过抽象工厂方式完成这款游戏的架构设计。

由题可知，游戏里边的各个平台的UIController和OperationController应该是我们最终生产的具体产品。所以新建两个抽象产品接口。
